#!/usr/bin/env python

import sys
import string
import os

def main():
	number = sys.argv[1]
	newscope  = sys.argv[2]

	number = number.replace("-", "")
	number = number.replace(")", "")
	number = number.replace("(", "")

	if len(number) < 10:
		print("Error: phone number has too few digits!")
		return
	elif len(number) == 10:
		number = "+1"+number

	elif len(number) == 11:
		number = "+"+number

	else:
		print("Error: phone number has too many digits!")
		return

	newscope = newscope.lower()

	if newscope != "all" and newscope != "freezer" and newscope != "vivarium":
		print("Error: scope '"+newscope+"' not recognized (accepted values are 'all', 'freezer', and 'vivarium')")
		return

	numberFile = open(os.path.join(os.path.expanduser('~'),"frosti/frosti/alertSrc/user_register/phone.txt"), 'r')

	newNumberFile = open(os.path.join(os.path.expanduser('~'),"frosti/frosti/alertSrc/user_register/phone.txt"), 'r')

	for line in numberFile:
		if number in line:

			lineArray = line.split()
			line = lineArray[0] + " " + newscope
			numberFile.write(line)
			print("Phone number "+number+" had it's scope changed from " + lineArray[1] + " to " +newscope)
			return

	print("Error: Phone number "+number+" was not found in our phone records!")
	return

main()
